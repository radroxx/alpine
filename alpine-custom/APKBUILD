# Contributor: Radroxxx <radroxxx@gmail.com>
# Maintainer: Radroxxx <radroxxx@gmail.com>
pkgname=alpine-custom
pkgver=0.1.0
pkgrel=0
pkgdesc="Meta package for minimal alpine + docker in ram"
url="https://alpinelinux.org"
arch="noarch"
license="No"
makedepends=""
install=""
subpackages=""
replaces=""
source=""

# Базовая система
depends="alpine-base"

# Файловая подсистема
depends="${depends} btrfs-progs e2fsprogs cryptsetup cryptsetup-openrc samba ntfs-3g"

# Сетевая подсистема
depends="${depends} dhclient ip6tables ipset curl rsync wireguard-tools openvpn lsyncd-openrc lsyncd"

# Wifi
depends="${depends} wireless-tools wpa_supplicant hostapd"

# SSH
depends="${depends} dropbear dropbear-scp dropbear-openrc"

# Docker
depends="${depends} containerd device-mapper-libs tini-static"

# utils
depends="${depends} dropbear-ssh docker-py dnsmasq supervisor gnupg sudo pv mc minicom socat unzip p7zip tmux borgbackup git mailx sqlite"

# loging
depends="${depends} rsyslog-openrc rsyslog rsyslog-relp logrotate fail2ban-openrc fail2ban"

# diagnostic
depends="${depends} htop atop iftop mtr iperf3 tcpdump ddrescue"

build() {
	return 0
}

package() {
	mkdir -p "$pkgdir"/etc
	# create /etc/alpine-custom
	echo $pkgver > "$pkgdir"/etc/alpine-custom
	local _ver="$(echo "$pkgver" | grep -E -o '^[0-9]+\.[0-9]+')"
	local _rel="v$_ver"
}
