---
kind: pipeline
type: docker
name: alpine

trigger:
  ref:
    - refs/heads/master
    - refs/pull/*/head
  event:
    - cron
    - tag
    - push

platform:
  os: linux
  arch: amd64

steps:
  - name: Build
    image: alpine:edge
    commands:
      - echo "Hello world"
      - ls
      - exit 0
  - name: Notify
    image: appleboy/drone-telegram
    settings:
      token:
        from_secret: telegram_token
      to: 205514323
    when:
      status: [ success, failure ]
      event:
        - cron
        - tag
    depends_on: ['Build']
